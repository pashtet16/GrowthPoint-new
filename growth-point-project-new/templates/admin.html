<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Growth Point - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename='admin.css')}}">
</head>
<body>
    <div class="admin-container">
        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <div class="admin-logo">
                    <div class="logo">Growth<span>Point</span></div>
                    <div class="admin-subtitle">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active" data-section="dashboard">
                        <i class="fas fa-home"></i>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </li>
                    <li class="nav-item" data-section="events">
                        <i class="fas fa-calendar-alt"></i>
                        <span>–í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</span>
                    </li>
                    <li class="nav-item" data-section="add-event">
                        <i class="fas fa-plus-circle"></i>
                        <span>–î–æ–±–∞–≤–∏—Ç—å</span>
                    </li>
                    <li class="nav-item" data-section="categories">
                        <i class="fas fa-tags"></i>
                        <span>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="admin-info">
                    <div class="admin-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="admin-details">
                        <div class="admin-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="admin-status active">
                            <div class="status-dot"></div>
                            <span>Online</span>
                        </div>
                    </div>
                </div>
                <a href="{{url_for('main')}}" class="btn-go-site">
                    <i class="fas fa-external-link-alt"></i>
                    <span>–ù–∞ —Å–∞–π—Ç</span>
                </a>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="admin-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <header class="content-header">
                <div class="header-left">
                    <h1 id="section-title">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
                    <p id="section-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏</p>
                </div>
                <div class="header-right">
                    <div class="current-date">
                        <i class="far fa-calendar"></i>
                        <span id="current-date">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>
            </header>

            <!-- –°–µ–∫—Ü–∏—è –ì–ª–∞–≤–Ω–∞—è -->
            <section class="content-section active" id="dashboard-section">
                <div class="welcome-card">
                    <div class="welcome-content">
                        <h2>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                        <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Growth Point</p>
                        <div class="quick-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="total-events">{{total_events|default(0)}}</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="active-events">{{total_events|default(0)}}</div>
                                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="upcoming-events">0</div>
                                <div class="stat-label">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö</div>
                            </div>
                        </div>
                    </div>
                    <div class="welcome-illustration">
                        <i class="fas fa-calendar-star"></i>
                    </div>
                </div>

                <div class="quick-actions-grid">
                    <button class="quick-action" data-action="add-event">
                        <div class="action-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <h3>–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h3>
                        <p>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</p>
                    </button>

                    <button class="quick-action" data-action="view-all">
                        <div class="action-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <h3>–í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
                        <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
                    </button>

                    <button class="quick-action" data-action="manage-categories">
                        <div class="action-icon">
                            <i class="fas fa-tags"></i>
                        </div>
                        <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                        <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</p>
                    </button>
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π -->
            <section class="content-section" id="events-section">
                <div class="section-header">
                    <h2>–í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h2>
                    <div class="header-actions">
                        <div class="search-box">
    <i class="fas fa-search"></i>
    <label for="events-search"></label><input type="text" placeholder="–ü–æ–∏—Å–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π..." id="events-search">
</div>
                        <button class="btn-primary" id="add-new-event">
                            <i class="fas fa-plus"></i>
                            –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ
                        </button>
                    </div>
                </div>

                <!-- –°–µ—Ç–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π -->
            <div class="events-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px;">
                {% for event in events %}
                <div class="event-card" data-category="{{event[2]}}">
                    <div class="event-image">
                        <img src="{{ event[9] }}" alt="{{event[1]}}">
                        <span class="event-category">
                            {{ event[2] or '–î—Ä—É–≥–æ–µ' }}
                        </span>
                    </div>
                    <div class="event-content">
                        <div class="event-date">
                            <i class="far fa-calendar"></i>
                            <span>{{event[4][:10]}}</span>
                            <span class="event-time">{{event[4][11::]}}</span>
                        </div>
                        <h3 class="event-title">{{event[1]}}</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>{{event[5]}}</span>
                        </div>
                        <p class="event-description">{{event[3]}}</p>
                        <div class="event-details">
                            <div class="detail">
                                <i class="fas fa-clock"></i>
                                <span>{{event[6]}}</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-users"></i>
                                <span>{{event[8]}}</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-wallet"></i>
                                <span>{{event[7]}} ‚ÇΩ</span>
                            </div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∞ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å -->
                        <form method="POST" action="{{ url_for('admin_panel') }}" style="display: inline;">
                            <input type="hidden" name="event_id" value="{{ event[0] }}">
                            <input type="hidden" name="action" value="edit">
                            <button type="submit" class="btn-edit">
                                <i class="fas fa-edit"></i>
                                <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                            </button>
                        </form>

                        <!-- –ö–Ω–æ–ø–∫–∞ –£–¥–∞–ª–∏—Ç—å -->
                        <form method="POST" action="{{ url_for('admin_panel') }}"
                              style="display: inline;">
                            <input type="hidden" name="event_id" value="{{ event[0] }}">
                            <input type="hidden" name="action" value="delete">
                            <button type="submit" class="btn-del">
                                <i class="fas fa-trash"></i>
                                <span>–£–¥–∞–ª–∏—Ç—å</span>
                            </button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>

            </section>

            <!-- –°–µ–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
            <section class="content-section" id="add-event-section">
                <div class="section-header">
                    <h2 id="form-title">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h2>
                    <div class="header-actions">
                        <button class="btn-secondary" id="preview-event">
                            <i class="fas fa-eye"></i>
                            –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                        </button>
                    </div>
                </div>

                <form id="event-form" class="event-form" action="{{url_for('admin_panel')}}" method="POST">
                    <input name="admin_form" type="hidden" id="admin_form" value="">

                    <div class="form-main">
                        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="event-title">
                                        <i class="fas fa-heading"></i>
                                        –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *
                                    </label>
                                    <input name="name" type="text" id="event-title" placeholder="–£—Ç—Ä–µ–Ω–Ω—è—è –π–æ–≥–∞ –≤ –ø–∞—Ä–∫–µ" required>
                                </div>

                                <div class="form-group">
                                    <label for="event-category">
                                        <i class="fas fa-tag"></i>
                                        –ö–∞—Ç–µ–≥–æ—Ä–∏—è *
                                    </label>
                                    <select name="category" id="event-category" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                        <option value="sport">–°–ø–æ—Ä—Ç</option>
                                        <option value="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                                        <option value="travel">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</option>
                                        <option value="culture">–ö—É–ª—å—Ç—É—Ä–∞</option>
                                        <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="event-date">
                                        <i class="far fa-calendar"></i>
                                        –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è *
                                    </label>
                                    <input name="datetime" type="datetime-local" id="event-date" required>
                                </div>

                                <div class="form-group">
                                    <label for="event-duration">
                                        <i class="fas fa-clock"></i>
                                        –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å *
                                    </label>
                                    <input name="duration" type="text" id="event-duration" placeholder="2 —á–∞—Å–∞, 3 –¥–Ω—è" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="event-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è *
                                </label>
                                <input name="place" type="text" id="event-location" placeholder="–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å" required>
                            </div>
                        </div>

                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ü–µ–Ω–∞ -->
                        <div class="form-group">
                            <label for="event-image">
                                <i class="fas fa-image"></i>
                                –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏)
                            </label>

                            <!-- –ó–∞–º–µ–Ω—è–µ–º –≥—Ä—É–ø–ø—É input –Ω–∞ drag-and-drop –æ–±–ª–∞—Å—Ç—å -->
                            <div class="image-input-group" id="image-drop-area">
                                <div class="drop-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</p>
                                    <p class="drop-hint">–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
                                    <span class="file-types">JPG, PNG, GIF –¥–æ 5MB</span>
                                </div>
                                <input type="file" name="image_file" id="event-image" accept="image/jpeg,image/png,image/gif,image/webp" style="display: none;">
                                <input type="hidden" name="image_data" id="image-data">
                                <!-- –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
                            </div>

                            <!-- –û—Å—Ç–∞–≤–ª—è–µ–º –æ–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
                            <div class="image-preview" id="image-preview">
                                <div class="preview-placeholder">
                                    <i class="fas fa-image"></i>
                                    <span>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                                </div>
                            </div>
                        </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="event-price">
                                        <i class="fas fa-wallet"></i>
                                        –°—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)
                                    </label>
                                    <input name="cost" type="number" id="event-price" placeholder="0 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö" min="0" value="0">
                                </div>

                                <div class="form-group">
                                    <label for="event-capacity">
                                        <i class="fas fa-users"></i>
                                        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç *
                                    </label>
                                    <input name="amount" type="number" id="event-capacity" placeholder="50" min="1" required>
                                </div>
                            </div>
                        </div>

                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="form-section">
                        <h3><i class="fas fa-align-left"></i> –û–ø–∏—Å–∞–Ω–∏–µ</h3>
                        <div class="form-group">
                            <label for="event-description">
                                –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *
                            </label>
                            <textarea name="describe" id="event-description" rows="6" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ..." required></textarea>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç—É—Å –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="form-section">
                        <h3><i class="fas fa-cog"></i> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-status">
                                    <i class="fas fa-toggle-on"></i>
                                    –°—Ç–∞—Ç—É—Å
                                </label>
                                <select name="status" id="event-status">
                                    <option value="active">–ê–∫—Ç–∏–≤–Ω–æ</option>
                                    <option value="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–µ–µ</option>
                                    <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="event-featured">
                                    <i class="fas fa-star"></i>
                                    –û—Å–æ–±–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
                                </label>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="event-featured">
                                    <label for="event-featured" class="checkbox-label">
                                        <div class="checkbox-custom"></div>
                                        <span>–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="save-draft">
                            <i class="fas fa-save"></i>
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
                        </button>
                        <button type="submit" class="btn-primary" id="publish-event">
                            <i class="fas fa-paper-plane"></i>
                            –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
                        </button>
                    </div>
                </form>
            </section>

            <!-- –°–µ–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
            <section class="content-section" id="categories-section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h2>
                    <button class="btn-primary" id="create-category">
                        <i class="fas fa-plus"></i>
                        –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                    </button>
                </div>

                <div class="categories-list">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
        <div class="modal-overlay" id="preview-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="preview-content">
                    <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω —Å—é–¥–∞ -->
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="close-preview">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button class="btn-primary" id="edit-from-preview">
                        <i class="fas fa-edit"></i>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{url_for('static', filename='admin.js')}}"></script>
</body>
</html>